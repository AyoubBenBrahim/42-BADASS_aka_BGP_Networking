
OSI model
Hussein Nasser ytube channel

===

APS TNDF

7 Application = 
6 Presentation = Encrypts if necessary, zip
5 Session = session id
pres + session = convert that thing we want to transmit into serialized info
                establish conx, Dialogue
4 trans = segment, manage ports(src/dest)
            segmentation and reassembly
            speed matching mechanism
            TCP/UDP
layer 5 and 6 are useless, we skip them most of the time
3 net/ip protocol = Packets / add ip(src/dest) + other headers
2 Data Link = moving frames(HDLC/PPP) - Hop to Hop data delivery
              MAC + LLC
              - error control/ flow control(speed matching)
              Frames / deal with mac address / (error detection..) small pieces ARP(Mac->IP) | deals with mac adrs
              corrects errors that may occur in the physical layer
              Sliding Window Protocol (https://youtu.be/LnbvhoxHn8M)
              High-level Data Link Control (HDLC) is a group of communication protocols of the data link layer for transmitting data between network points or nodes. Since it is a data link protocol, data is organized into frames. A frame is transmitted via the network to the destination that verifies its successful arrival.

              Multiple Access Protocols = avoid talking simultaneously aka collision 
                                          Random access protocol (CSMA/CD..) = any station has the right to acess and send data
                                          CSMA = carrier(medium/chanel) sense protocol aka "listen before talk"

1 Physical = frame into ones and zeros (electricity doesn't has direction aka broadcast) 
            converts the digital bits into electrical, radio, or optical signals.

this data(binary) will be sent to everyone
then send them up to make sense
Data link receives all the frames checks adres and rejects them if not the right host
each layer towards up removes its added headers..


switch goes only to layer 2
hub to layer 3
router 3

Hub = im not smart enough so broadcast the frame to all, machines accept it or drops it (its for me or not)
the network become very busy

switch works smarter(looks at the content) + remembers (tables)

*******************************************************************

protocol data unit (PDU) is a single unit of information transmitted among peer entities of a computer network.
(packet, segment, datagram)
PDU (Protocol Data Unit) is a generic term used to refer to the packets in different layers of the OSI model.

Packet:

data bytes have a specific format in the OSI networking model since each layer has its specific unit

The basic unit of communication between a source and a destination in a network is a packet.
Data sent through the network is divided into packets

Fragment:

Packets can often be larger than the MTU, so each packet is also divided into smaller pieces of data called fragments.
each network has its own MTU capacity. 
If the packet length is bigger than the MTU, the network layer checks the Don’t Fragment (DF) flag associated with the packet. If the DF flag is \mathsf{1}, we discard the packet. Otherwise, the network layer decides the size of the fragments, 
create the header, encapsulate the fragments within the header, and send them to the next layer:

Frame:
The main difference between a packet and a frame is the association with the OSI layers.

While a packet is the unit of data used in the network layer, 
a frame is the unit of data used in the OSI model's data link layer. 
Frames are not much different from packets. They contain more information about the data. 
The process of framing consists of adding some extra bytes into the packet turning it into the frame

Packet + extra info/headers = Frame

Datagram:
While TCP uses packets in connection-oriented protocols, datagrams are used in UDP

Application = Data
Transprt = Segments/Datagrams  : ACK, packet segmentation(MTU)
Internet = Packets = addressing , routing
Data Link = Frames
Physical = bit
(https://youtu.be/-hkF4OyxzNQ)


=======

VLAN is a layer 2 concept (frames)
 VLAN tagging

A switching loop or bridge loop occurs in computer networks when there is more than one layer 2 path between two endpoints
(e.g. multiple connections between two network switches or two ports on the same switch connected to each other).
The loop creates broadcast storms as broadcasts and multicasts are forwarded by switches out every port, 
the switch or switches will repeatedly rebroadcast the broadcast messages flooding the network.
Since the layer-2 header does not include a time to live (TTL) field, if a frame is sent into a looped topology,it can loop forever

Routing loops are tempered by a time to live (TTL) field in layer-3 packet header; Packets will circulate the routing loop until their TTL value expires.
 No TTL concept exists at layer 2 and packets in a switching loop will circulate until dropped

broadcast storm
A packet that induces such a storm is occasionally nicknamed a Chernobyl packet.
a broadcast storm can be instigated for the purpose of a denial of service (DOS) 

==> Spanning Tree Protocol (STP) prevents broadcast loops, blocks the redundant link(will be used when active links or ports goes down)
    (https://youtu.be/GSKoQ8ZR8rw?list=PLBlnK6fEyqRgMCUAG0XRw78UA8qnv6jEx)

Layer 2 loops


In Open Systems Interconnection (OSI) terminology, a service data unit (SDU) is a unit of data that has been passed down from an OSI layer or sublayer to a lower layer. This unit of data (SDU) has not yet been encapsulated into a protocol data unit (PDU) by the lower layer. That SDU is then encapsulated into the lower layer's PDU and the process continues until reaching the PHY, physical, or lowest layer of the OSI stack.

At the receiving device the data is passed from the lowest to the highest layer as a series of SDUs while being successively stripped from each layer's header or footer until reaching the topmost layer, where the last of the data is consumed


Fragmentation is a phenomenon in which storage space is used inefficiently, reducing capacity or performance and often both.
Segmentation is the process of dividing the computer’s primary memory into segments or sections.

Fragmentation, 
a process in which free memory space is broken into little pieces. In this, memory blocks cannot be allocated to processes due to their small size and such blocks remain unused. It usually occurs in dynamic memory allocation system when many of free blocks are too small to satisfy any request

====

ip = location of a person (router friendly)
MAC = name of the person (switch friendly)
(https://youtu.be/FkiTOMn-XGw?list=PLBlnK6fEyqRgMCUAG0XRw78UA8qnv6jEx)

reaching the city (find the network)
reaching the appartment (find the host)
reaching the right person (the port)

ip adr says who are u in the network
subnet mask says who are ur neighbors in the network

==
Switch => three operations :
        learn
        flood
        forward
        
 ====
 internet is nothing more than a series of routers


RIP = routing information protocol
RIP uses the nbr of hopes(routers) between networks (max 15 router)
OSPF calculates the cost of a route/ based on bandwidth (link-state protocols) = bandwidth-based metrics
RIP cares only about nbr of routers in the path/ uses hopes to determine the best route = distance based

a value of each route = metric

OSPF cost link = 100 000 000 / bandwidth
100 Mbps ==> 100 000 000 / 100 000 000 bps = 1

right protocol/route is chosen based on administrative distances(rank)..


IGP
EGP

 autonomous system (AS) is a collection of connected Internet Protocol (IP) routing prefixes under the control of one or more network operators on behalf of a single administrative entity or domain, that presents a common and clearly defined routing policy to the Internet

  In simpler terms, an AS can be thought of as a connected group of IP networks managed by a single administrative entity, such as a university, government, commercial organization or other type of internet service provider (ISP).

  AS is sometimes described as a set of routers that are managed by a single administrative entity. 

  An AS has many different sub-networks with combined routing logic and common routing policies.

  Autonomous systems exchange routing information based on their routing policies

  Each autonomous system is assigned a globally unique number called an Autonomous System Number (ASN). The number serves as an identifier for the AS and is used when exchanging routing information with other autonomous systems.

  (IANA) manages the ASN system and coordinates the distribution of ASNs across five global regions. 

  BGP can direct packets along the most efficient routes to their target autonomous systems.

  Networks within an autonomous system communicate routing information to each other using one or more interior gateway protocols. In contrast, communications between autonomous systems rely on a single exterior gateway protocol -- Border Gateway Protocol -- which makes it possible to share routing information and efficiently route data packets between autonomous systems

=====

  QoS ==> type of service (ToS) field = a packet would be placed in a prioritized outgoing queue,

  ==

  An ISP (internet service provider) is a company that provides individuals and organizations access to the internet and other related services. An ISP has the equipment and the telecommunication line access required to have a point of presence on the internet for the geographic area served.

ISPs make it possible for customers to access the internet while also providing additional services such as email,



*******


To use an analogy, an AS is like a city with many streets. A network prefix is one street, and an IP address is one particular house. Network packets are like cars traveling from one house to another, and BGP is like a navigation app that helps them take the best possible route.

https://www.imperva.com/learn/ddos/border-gateway-protocol-bgp/
======

Intra-, which comes from the Latin intra (meaning “within”)

inter, meaning "among, between”

IGP / intra-autonomous system routing protocols (OSPF - RIP)
EGP/ inter-AS routing protocols (BGP)

https://sabercomlogica.com/en/intra-as-and-inter-as-routing/

EGP / IGP: OSPF EIGRP BGP RIP IS-IS
https://youtu.be/KjNYEzEBRD8

BGP = the glue that holds internet together 

the ISP uses an IGP internally to build reachability between its routers. It then implements iBGP on top of this to actually create a coherent routing policy within its autonomous system and then eBGP to carefully expose network information to- and receive information from- other autonomous systems.
https://www.quora.com/What-is-the-need-of-iBGP-when-we-have-other-routing-protocols-like-EIGP-OSPF

Both IS-IS and Open Shortest Path First(OSPF) are link state protocols, and both use the same Dijkstra algorithm for computing the best path through the network
IS-IS differs from OSPF in the way that "areas" are defined and routed between. IS-IS routers are designated as being: Level 1 (intra-area); Level 2 (inter area); or Level 1–2 (both). Routing information is exchanged between Level 1 routers and other Level 1 routers of the same area, and Level 2 routers can only form relationships and exchange information with other Level 2 routers. Level 1–2 routers exchange information with both levels and are used to connect the inter area routers with the intra area routers.

In OSPF, areas are delineated on the interface such that an area border router (ABR) is actually in two or more areas at once, effectively creating the borders between areas inside the ABR, whereas in IS-IS area borders are in between routers, designated as Level 2 or Level 1–2. The result is that an IS-IS router is only ever a part of a single area.


ISIS runs on top of data link layer(encapsulated in Data link layer), whereas OSPF runs on top of IP


 administrative distance of OSPF is 110 and ISIS is 115.

 ====

 So, BGP performs “path vector” routing by advertising a vector of paths (lists of ASes) rather than just distances (hop counts.)

 Path-vector routing protocol : It is different from the distance vector routing and link state routing. 
 A path vector protocol guarantees loop free paths through the network by recording each hop the routing advertisement traverses through the network.

 Each entry in the routing table contains the destination network, the next router and the path to reach the destination. 

 Updates that have looped through the network and returned to the same node are easily detected and discarded.

 advertise the reachability of networks
 It has three phases:
    Initiation
    Sharing
    Updating

    =====

    Why use iBGP inside an Autonomous System, if IGP protocols fulfill the need for internal communication:
    
    iBGP isn't really used for internal routing, it is used by all your eBGP routers to share their routes.
    
    EBGP exchanges internet (i.e. global) prefixes/routes from other Autonomous systems (EBGP peers). To reach those prefixes, someone should distribute/advertise across the internal network, IBGP comes to the rescue. IBGP advertises these global prefixes to the routers within the Autonomous System (AS). Why not IGP does the same? As IGP is quite chatty (i.e. in fact not designed for handling a large number of routes),

    https://networkengineering.stackexchange.com/questions/3909/why-use-ibgp-inside-an-autonomous-system-if-igp-protocols-fulfill-the-need-for



====

Multiprotocol Label Switching (MPLS) => a packet forwarding technology ==>label Switching =>faster lookup => ip header is still there

An MPLS-capable router is often referred to as a label- switched router
MPLS-capable router need not extract the destination IP address and perform a lookup of the longest prefix match in the forwarding table.

In a nutshell, packets in an MPLS network are prefixed with an MPLS header (called a label stack). 
The label stack is the only thing examined by the MPLS switches
Therefore, no traditional routing table lookups are required, which in theory makes this a much faster solution than more traditional IP-based solutions. 
- Network Warrior

====

    do sh ip route rip

int fa1/0
interface fastEthernet0/0

ip add ......
router
router ospf 1
int fa1/0 ==> enable ospf on this interface
ip ospf
ip ospf 1 area 0 (interface belongs to)

******

redistribution of routes

===
int fa 1/0
ip add 40.1.1.1 255.....
router bgp 1 (==> ASN)
neighbor 40.1.1.2 255.255.255.252 remote-as 2
do sh ip bgp summ

ip address 10.10.1.65 255.255.255.224

show ip route
show ip ospf interface

show ip ospf neighbor
(This command gives you a list of OSPF neighbors that are directly connected to the router)




OSPF

 Link-state advertisements 

  how updates are sent between areas. 
These updates are called link-state advertisements , or LSAs. An LSA is an OSPF multicast that describes 
a routing change or routing update to other routers or areas. 


Each network segment needs a designated router, known as the DR
 it is the job of the DR to multicast the update to all routers within its area. 
 A backup designated router (BDR) must also be selected. This router becomes the DR if the DR becomes 
unavailable. 


You configure OSPF much like you configure other routing protocols: use the router command to 
establish the protocol and a process number, and use the network command to tell the router which 

networks it's responsible for. It's easy to become confused: with OSPF the network command takes a 
wildcard mask, not a subnet mask. 

router ospf  99
  network 10.10.1.0 0.0.0.255 area 0

Here, we establish an OSPF routing process with the process ID 99. This routing process is responsible for 
although they are frequently called AS numbers, the numbers associated with EIGRP and OSPF routing processes are really just process IDs

the network 10.10.1.0/24, which belongs to area 0. Therefore, this router is part of the OSPF backbone 

area. Do not confuse the process ID (99) with the area ID (0).

ASBR (autonomous system border router)


192.168.2.0 0.0.0.255
that wildcard masks look like subnet masks, but they aren't;
Wildcard = 255 - Subnet

=======

route summarization

you should notice that there are four routes pointing to 172.16.1.1 for the various 10.x.x.x networks. 
We can simplify the routing table


====
BGP

We don't provide a network mask, as BGP assumes the old classful addressing scheme when a mask isn't provided explicitly.

router bgp 500
network 10.10.2.0 mask 255.255.224.0

Next, we need to define our routing peers with the neighbor command. This step
also defines whether we are using iBGP or eBGP. If our neighbor router has the same AS number, we are using iBGP. If our neighbor has a different AS number, we are configuring eBGP. In this case, we configured a neighbor with a different AS number, meaning that we are using eBGP. 

router bgp 500
neighbor 192.168.1.5 remote-as 400

By default, BGP summarizes routes on class boundaries.

 Configuring "no auto-summary" disables automatic summarization.

 When an iBGP router advertises a route, it advertises the next hop of the route as it learned it. The next-hop-self keyword (used with the neighbor command)
tells the router to rewrite the route's next hop as itself.

===

 Circuit Switching vs. Packet Switching vs Message Switching
https://youtu.be/-HlJ4psu5aU

************
VXLAN

Extensible: able to be extended or stretched; extendable.

Network virtualization

VXLAN is the most commonly used protocol to create overlay networks that sit on top of the physical network, 

What Problem Does VXLAN Solve?

Data centers have rapidly increased their server virtualization over the past decade

VXLAN is a technology that allows you to segment your networks (as VLANs do) but also solves the scaling limitation of VLANs and provides benefits that VLANs can

How Does VXLAN Work?
VXLAN tunneling protocol that encapsulates Layer 2 Ethernet frames in Layer 3 UDP packets, enables you to create virtualized Layer 2 subnets, or segments, that span physical Layer 3 networks. Each Layer 2 subnet is uniquely identified by a VXLAN network identifier (VNI) that segments traffic.

The entity that performs the encapsulation and decapsulation of packets is called a VXLAN tunnel endpoint (VTEP).

----

 Overlay Network 

overlay = cover/layer
something laid as a covering over something else.

An overlay network is a computer network based on another network. 
An overlay network separates network services from the underlying infrastructure by encapsulating a packet into another packet.
Using nested networks, multiple layers of network abstraction can be created to run virtual network layers

Network overlays are a method of using software virtualization to create additional layers of network abstraction 

endpoints designated by an identification tag

We need overlay networks due to the limitations of the underlay network.
An underlay network, as the name implies, is the underlying physical infrastructure of overlay networks.

On an underlay network, devices such as switches, routers, load balancers, and firewalls can be interconnected.

The underlay network can be a Layer 2 or Layer 3 network. A typical example of Layer 2 underlay network is an Ethernet network, on which VLANs are created.

Overlay Network (VXLAN, NVGRE, SST, GRE, NVO3, and EVPN)

To get rid of the limitations of underlay networks, virtual overlay networks can be created over underlay networks using network virtualization technologies.

Tunnels are established between interconnected overlay devices.

When sending a data packet, a device adds a new IP header and a tunnel header to the data packet and shields the inner IP header. The data packet is then forwarded based on the new IP header. When the data packet is received by another device, the device removes the outer IP header and tunnel header to obtain the original data packet. 

 extra overheads

 The scalability is high. For example, a VLAN supports a maximum of 4096 discriminators, whereas a VXLAN provides a maximum of 16 million discriminators.

https://info.support.huawei.com/info-finder/encyclopedia/en/Overlay+network.html

Ethernet Virtual Private Network (EVPN)


Virtual eXtensible Local Area Network (VXLAN) is one of the Network Virtualization over Layer 3 technologies 
an extension to Virtual Local Area Network (VLAN)

 VXLAN encapsulates a Layer 2 Ethernet frame into a UDP packet and transmits the packet over a Layer 3 network.
 VXLAN network identifier (VNI) that is similar to a VLAN ID to a VXLAN header. 

 VXLAN is essentially a tunneling technology.

  It establishes a logical tunnel on the IP network between the source and destination network devices to encapsulate user-side packets and forward them through the tunnel. 


VXLAN has become the mainstream technology for constructing data center networks


What Are the Differences Between VXLAN and VLAN?
-----

VLAN is as a traditional network isolation technology. In accordance with standards, a maximum of about 4k VLANs are available, which cannot meet the tenant isolation requirements of large data centers. In addition, each VLAN is a small and fixed Layer 2 virtual network, which does not support large-scale dynamic VM migration.

VXLAN overcomes the preceding disadvantages of VLAN. VXLAN uses the 24-bit VNI field (as shown in Figure 1-5) to identify up to 16M tenants, compared to a maximum of 4k tenants in VLAN. 

  https://support.huawei.com/enterprise/en/doc/EDOC1100086966

  VTEP ==> VXLAN Tunnel Endpoint 
  VNI  ==> VXLAN Network Identifier 